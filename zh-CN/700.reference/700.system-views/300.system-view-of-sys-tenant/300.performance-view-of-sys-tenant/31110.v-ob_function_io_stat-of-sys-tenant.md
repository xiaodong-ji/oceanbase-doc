|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||

# V$OB_FUNCTION_IO_STAT

<main id="notice" type='explain'>
<h4>说明</h4>
<p>该视图从 V4.3.4 版本开始引入。</p>
</main>

## 功能描述

该视图展示了所有租户在当前 OBServer 节点上 Function 级别的 IO 统计信息。当 Function 级的后台任务对应的资源组未启用资源管理计划时，展示的 IO 信息仅作为统计参考，对应的资源无法被限制。

## 字段说明

|             字段名称          |      类型    | 是否可以为 NULL |            描述                                            |
|------------------------------|--------------|----------------|------------------------------------------------------------|
| SVR_IP                       | varchar(46)  | NO             | 服务器 IP 地址     |
| SVR_PORT                     | bigint(20)   | NO             | 服务器端口号       |
| TENANT_ID                    | bigint(20)   | NO             | 租户 ID            |
| FUNCTION_NAME                | varchar(32)  | NO             | Function 对应的后台任务名称：<ul><li>`COMPACTION_HIGH`：Mini Merge 和 DDL KV Merge 任务</li> <li>`HA_HIGH`：复制、Rebuild 和恢复等高优先级高可靠任务</li> <li>`COMPACTION_MID`：Minor Merge 任务</li> <li>`HA_MID`：中优先级高可靠任务，例如迁移任务</li> <li>`COMPACTION_LOW`：Major Merge 任务</li> <li>`HA_LOW`：备份和备份清理等低优先级高可靠任务</li> <li>`DDL`：唯一索引校验、删列补数据等场景的任务</li> <li>`DDL_HIGH`：DDL MemTable 的转储任务</li> <li>`CLOG_LOW`：物理备库和 CDC 读取任务</li> <li>`CLOG_MID`<： Follower 副本读共享存储、日志归档读本地盘等任务</li> <li>`CLOG_HIGH`：clog 写入本地盘、clog 文件上传共享存储、Follower 副本读本地盘等任务</li> <li>`GC_MACRO_BLOCK`：宏块回收和复用任务</li> <li>`OPT_STATS`：统计信息收集任务</li> <li>`IMPORT`：导入任务</li> <li>`SQL_AUDIT`：SQL 审计任务</li> <li>`DEFAULT_FUNCTION`：除了已经定义的任务以外的其他所有后台任务</li></ul>    |
| MODE                         | varchar(32)  | NO             | IO 对应的读写模式(共享存储的请求为远程请求，其他类型的请求为本地请求)：<ul><li>`LOCAL READ`：本地读</li> <li>`LOCAL WRITE`：本地写</li> <li>`REMOTE READ`：远程读</li> <li>`REMOTE WRITE`：远程写</li></ul>    |
| SIZE                         | bigint(20)   | NO             | 平均的 IO 大小     |
| REAL_IOPS                    | bigint(20)   | NO             | 实际的 IOPS     |
| REAL_MBPS                    | bigint(20)   | NO             | 实际带宽，单位为 MB/s     |
| SCHEDULE_US                  | bigint(20)   | NO             | IO 调度的平均消耗时间，单位为 us     |
| IO_DELAY_US                  | bigint(20)   | NO             | 磁盘 IO 的平均执行时间，单位为 us     |
| TOTAL_US                     | bigint(20)   | NO             | IO 的总体平均执行时间，单位为 us     |

## 查询示例

sys 租户下，查询所有租户在当前 OBServer 节点上 Function 级别的 IO 统计信息。

```shell
obclient [oceanbase]> SELECT * FROM oceanbase.V$OB_FUNCTION_IO_STAT LIMIT 5;
```

查询结果如下：

```shell
+----------------+----------+-----------+------------------+--------------+------+-----------+-----------+-------------+-------------+----------+
| SVR_IP         | SVR_PORT | TENANT_ID | FUNCTION_NAME    | MODE         | SIZE | REAL_IOPS | REAL_MBPS | SCHEDULE_US | IO_DELAY_US | TOTAL_US |
+----------------+----------+-----------+------------------+--------------+------+-----------+-----------+-------------+-------------+----------+
| 172.xx.xxx.xxx |     2882 |         0 | DEFAULT_FUNCTION | LOCAL READ   |    0 |         0 |         0 |           0 |           0 |        0 |
| 172.xx.xxx.xxx |     2882 |         0 | DEFAULT_FUNCTION | LOCAL WRITE  |    0 |         0 |         0 |           0 |           0 |        0 |
| 172.xx.xxx.xxx |     2882 |         0 | DEFAULT_FUNCTION | REMOTE READ  |    0 |         0 |         0 |           0 |           0 |        0 |
| 172.xx.xxx.xxx |     2882 |         0 | DEFAULT_FUNCTION | REMOTE WRITE |    0 |         0 |         0 |           0 |           0 |        0 |
| 172.xx.xxx.xxx |     2882 |         0 | COMPACTION_HIGH  | LOCAL READ   |    0 |         0 |         0 |           0 |           0 |        0 |
+----------------+----------+-----------+------------------+--------------+------+-----------+-----------+-------------+-------------+----------+
5 rows in set
```

## 相关视图或文档

* [GV$OB_FUNCTION_IO_STAT](910.gv-ob_function_io_stat-of-sys-tenant.md)

* [GV$OB_GROUP_IO_STAT](920.gv-ob_group_io_stat-of-sys-tenant.md)

* [V$OB_GROUP_IO_STAT](31120.v-ob_group_io_stat-of-sys-tenant.md)

* [配置租户内资源隔离（MySQL 模式）](../../../../600.manage/200.tenant-management/600.common-tenant-operations/300.resource-isolation/300.resource-isolation-of-mysql-mode/200.resource-isolation-at-user-level-of-mysql-mode.md)

* [配置租户内资源隔离（Oracle 模式）](../../../../600.manage/200.tenant-management/600.common-tenant-operations/300.resource-isolation/200.resource-isolation-of-oracle-mode/200.resource-isolation-at-user-level-of-oracle-mode.md)
