|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||

# arbitration_degradation_policy

<main id="notice" type='explain'>
<h4>说明</h4>
<p>对于 V4.3.x 版本，该配置项从 V4.3.4 版本开始引入。</p>
</main>

## 功能描述

`arbitration_degradation_policy` 用于设置在仲裁降级前是否检查日志流 Leader 与 RS 的网络连通情况。

## 权限要求

* 查询配置项

  `sys` 租户和所有用户租户均可以使用 `SHOW PARAMETERS` 语句或视图 `GV$OB_PARAMETERS` 查询该配置项。

* 修改配置项

  仅 `sys` 租户可以修改该配置项，用户租户不能修改该配置项。

## 属性说明

|        属性                  |     描述      |
|------------------------------|-------------|
| 参数类型                      | String        |
| 默认值                        | LS_POLICY       |
| 取值范围                      | <ul><li>`LS_POLICY`：按照日志流执行默认的降级流程。</li> <li>`CLUSTER_POLICY`：执行默认的降级流程前，检查日志流 Leader 与 RS 的网络是否连通，如果不连通，则不执行降级。</br</li></ul> |
| 是否可修改                    | 是，支持通过 `ALTER SYSTEM SET` 语句修改。         |
| 是否重启 OBServer 节点生效    | 否，设置后立即生效。     |

## 使用说明

当配置项的取值为 `CLUSTER_POLICY` 时，日志流 Leader 会在执行仲裁降级前检查自身是否与 RS 的网络连通。如果发现与 RS 不连通，则不再执行仲裁降级，并进入选举“静默”状态，让当前副本不再当选为 Leader，从而确保 Leader 最终切到与 RS 网络连通的副本上。另外，进入选举“静默”状态的 Follower 副本会定时检查与 RS 的网络连通性，当其恢复与 RS 的网络连通时，就会退出选举“静默”状态，允许重新被当选为 Leader。

## 配置示例

设置日志流的仲裁降级策略为 `CLUSTER_POLICY`。

```shell
obclient> ALTER SYSTEM SET arbitration_degradation_policy = 'CLUSTER_POLICY';
```
